'use strict';

/**
 * Media Upload
 */
jQuery(document).ready(function ($) {

	var mediaUploader;
	var uploadButton = $('#upload-button');
	var removeButton = $('#remove-button');
	var attachmentMediaView = $('#attachment-media-view');
	var browserPreview = $('#browser-preview');
	var appIconPreview = $('#app-icon-preview');
	var siteIcon = $('#site_icon');

	uploadButton.click(function (e) {
		e.preventDefault();

		if (mediaUploader) {
			mediaUploader.open();
			return;
		}

		var mediaUploader = wp.media.frames.file_frame = wp.media({
			title: 'Choose Image',
			button: {
				text: 'Select'
			},
			library: {
				type: 'image'
			},
			multiple: false
		});

		// When a file is selected, grab the URL and set it as the text field's value
		mediaUploader.on('select', function () {
			var attachment = mediaUploader.state().get('selection').first().toJSON();
			siteIcon.val(attachment.id);
			attachmentMediaView.removeClass('no-show-preview');
			browserPreview.attr('src', attachment.url);
			appIconPreview.attr('src', attachment.url);
			uploadButton.text('Change Image');
		});
		// Open the uploader dialog
		mediaUploader.open();
	});

	removeButton.click(function () {
		var answer = confirm('Are you sure?');
		if (answer == true) {
			siteIcon.val('0');
			attachmentMediaView.addClass('no-show-preview');
			uploadButton.text('Select Image');
		}
		return false;
	});
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1lZGlhLXVwbG9hZC5qcyJdLCJuYW1lcyI6WyJqUXVlcnkiLCJkb2N1bWVudCIsInJlYWR5IiwiJCIsIm1lZGlhVXBsb2FkZXIiLCJ1cGxvYWRCdXR0b24iLCJyZW1vdmVCdXR0b24iLCJhdHRhY2htZW50TWVkaWFWaWV3IiwiYnJvd3NlclByZXZpZXciLCJhcHBJY29uUHJldmlldyIsInNpdGVJY29uIiwiY2xpY2siLCJlIiwicHJldmVudERlZmF1bHQiLCJvcGVuIiwid3AiLCJtZWRpYSIsImZyYW1lcyIsImZpbGVfZnJhbWUiLCJ0aXRsZSIsImJ1dHRvbiIsInRleHQiLCJsaWJyYXJ5IiwidHlwZSIsIm11bHRpcGxlIiwib24iLCJhdHRhY2htZW50Iiwic3RhdGUiLCJnZXQiLCJmaXJzdCIsInRvSlNPTiIsInZhbCIsImlkIiwicmVtb3ZlQ2xhc3MiLCJhdHRyIiwidXJsIiwiYW5zd2VyIiwiY29uZmlybSIsImFkZENsYXNzIl0sIm1hcHBpbmdzIjoiOztBQUFBOzs7QUFHQ0EsT0FBT0MsUUFBUCxFQUFpQkMsS0FBakIsQ0FBdUIsVUFBU0MsQ0FBVCxFQUFXOztBQUVsQyxLQUFJQyxhQUFKO0FBQ0EsS0FBSUMsZUFBc0JGLEVBQUUsZ0JBQUYsQ0FBMUI7QUFDQSxLQUFJRyxlQUFzQkgsRUFBRSxnQkFBRixDQUExQjtBQUNBLEtBQUlJLHNCQUFzQkosRUFBRSx3QkFBRixDQUExQjtBQUNBLEtBQUlLLGlCQUFzQkwsRUFBRSxrQkFBRixDQUExQjtBQUNBLEtBQUlNLGlCQUFzQk4sRUFBRSxtQkFBRixDQUExQjtBQUNBLEtBQUlPLFdBQXNCUCxFQUFFLFlBQUYsQ0FBMUI7O0FBRUFFLGNBQWFNLEtBQWIsQ0FBbUIsVUFBU0MsQ0FBVCxFQUFZO0FBQzlCQSxJQUFFQyxjQUFGOztBQUVBLE1BQUlULGFBQUosRUFBbUI7QUFDbEJBLGlCQUFjVSxJQUFkO0FBQ0E7QUFDQTs7QUFFRCxNQUFJVixnQkFBZ0JXLEdBQUdDLEtBQUgsQ0FBU0MsTUFBVCxDQUFnQkMsVUFBaEIsR0FBNkJILEdBQUdDLEtBQUgsQ0FBUztBQUN6REcsVUFBTyxjQURrRDtBQUV6REMsV0FBUTtBQUNQQyxVQUFNO0FBREMsSUFGaUQ7QUFLekRDLFlBQVM7QUFDUkMsVUFBTTtBQURFLElBTGdEO0FBUXpEQyxhQUFVO0FBUitDLEdBQVQsQ0FBakQ7O0FBWUE7QUFDQXBCLGdCQUFjcUIsRUFBZCxDQUFpQixRQUFqQixFQUEyQixZQUFXO0FBQ3BDLE9BQUlDLGFBQWF0QixjQUFjdUIsS0FBZCxHQUFzQkMsR0FBdEIsQ0FBMEIsV0FBMUIsRUFBdUNDLEtBQXZDLEdBQStDQyxNQUEvQyxFQUFqQjtBQUNBcEIsWUFBU3FCLEdBQVQsQ0FBYUwsV0FBV00sRUFBeEI7QUFDQXpCLHVCQUFvQjBCLFdBQXBCLENBQWdDLGlCQUFoQztBQUNBekIsa0JBQWUwQixJQUFmLENBQW9CLEtBQXBCLEVBQTJCUixXQUFXUyxHQUF0QztBQUNBMUIsa0JBQWV5QixJQUFmLENBQW9CLEtBQXBCLEVBQTJCUixXQUFXUyxHQUF0QztBQUNBOUIsZ0JBQWFnQixJQUFiLENBQWtCLGNBQWxCO0FBQ0QsR0FQRDtBQVFBO0FBQ0FqQixnQkFBY1UsSUFBZDtBQUNBLEVBL0JEOztBQWlDQVIsY0FBYUssS0FBYixDQUFtQixZQUFXO0FBQzdCLE1BQUl5QixTQUFTQyxRQUFRLGVBQVIsQ0FBYjtBQUNBLE1BQUlELFVBQVUsSUFBZCxFQUFvQjtBQUNuQjFCLFlBQVNxQixHQUFULENBQWEsR0FBYjtBQUNBeEIsdUJBQW9CK0IsUUFBcEIsQ0FBNkIsaUJBQTdCO0FBQ0FqQyxnQkFBYWdCLElBQWIsQ0FBa0IsY0FBbEI7QUFDQTtBQUNELFNBQU8sS0FBUDtBQUNBLEVBUkQ7QUFVQSxDQXJEQSIsImZpbGUiOiJpbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogTWVkaWEgVXBsb2FkXG4gKi9cbiBqUXVlcnkoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCQpe1xuXHQgXG5cdHZhciBtZWRpYVVwbG9hZGVyO1xuXHR2YXIgdXBsb2FkQnV0dG9uICAgICAgICA9ICQoJyN1cGxvYWQtYnV0dG9uJyk7XG5cdHZhciByZW1vdmVCdXR0b24gICAgICAgID0gJCgnI3JlbW92ZS1idXR0b24nKTtcblx0dmFyIGF0dGFjaG1lbnRNZWRpYVZpZXcgPSAkKCcjYXR0YWNobWVudC1tZWRpYS12aWV3Jyk7XG5cdHZhciBicm93c2VyUHJldmlldyAgICAgID0gJCgnI2Jyb3dzZXItcHJldmlldycpO1xuXHR2YXIgYXBwSWNvblByZXZpZXcgICAgICA9ICQoJyNhcHAtaWNvbi1wcmV2aWV3Jyk7XG5cdHZhciBzaXRlSWNvbiAgICAgICAgICAgID0gJCgnI3NpdGVfaWNvbicpO1xuXG5cdHVwbG9hZEJ1dHRvbi5jbGljayhmdW5jdGlvbihlKSB7XG5cdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFxuXHRcdGlmIChtZWRpYVVwbG9hZGVyKSB7XG5cdFx0XHRtZWRpYVVwbG9hZGVyLm9wZW4oKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0XG5cdFx0dmFyIG1lZGlhVXBsb2FkZXIgPSB3cC5tZWRpYS5mcmFtZXMuZmlsZV9mcmFtZSA9IHdwLm1lZGlhKHtcblx0XHRcdHRpdGxlOiAnQ2hvb3NlIEltYWdlJyxcblx0XHRcdGJ1dHRvbjoge1xuXHRcdFx0XHR0ZXh0OiAnU2VsZWN0J1xuXHRcdFx0fSxcblx0XHRcdGxpYnJhcnk6IHtcblx0XHRcdFx0dHlwZTogJ2ltYWdlJ1xuXHRcdFx0fSxcblx0XHRcdG11bHRpcGxlOiBmYWxzZVxuXHRcdH0pO1xuXHRcdFxuXG5cdFx0Ly8gV2hlbiBhIGZpbGUgaXMgc2VsZWN0ZWQsIGdyYWIgdGhlIFVSTCBhbmQgc2V0IGl0IGFzIHRoZSB0ZXh0IGZpZWxkJ3MgdmFsdWVcblx0XHRtZWRpYVVwbG9hZGVyLm9uKCdzZWxlY3QnLCBmdW5jdGlvbigpIHtcblx0XHQgIHZhciBhdHRhY2htZW50ID0gbWVkaWFVcGxvYWRlci5zdGF0ZSgpLmdldCgnc2VsZWN0aW9uJykuZmlyc3QoKS50b0pTT04oKTtcblx0XHQgIHNpdGVJY29uLnZhbChhdHRhY2htZW50LmlkKTtcblx0XHQgIGF0dGFjaG1lbnRNZWRpYVZpZXcucmVtb3ZlQ2xhc3MoJ25vLXNob3ctcHJldmlldycpO1xuXHRcdCAgYnJvd3NlclByZXZpZXcuYXR0cignc3JjJywgYXR0YWNobWVudC51cmwpO1xuXHRcdCAgYXBwSWNvblByZXZpZXcuYXR0cignc3JjJywgYXR0YWNobWVudC51cmwpO1xuXHRcdCAgdXBsb2FkQnV0dG9uLnRleHQoJ0NoYW5nZSBJbWFnZScpO1xuXHRcdH0pO1xuXHRcdC8vIE9wZW4gdGhlIHVwbG9hZGVyIGRpYWxvZ1xuXHRcdG1lZGlhVXBsb2FkZXIub3BlbigpO1xuXHR9KTtcblx0XG5cdHJlbW92ZUJ1dHRvbi5jbGljayhmdW5jdGlvbigpIHtcblx0XHR2YXIgYW5zd2VyID0gY29uZmlybSgnQXJlIHlvdSBzdXJlPycpO1xuXHRcdGlmIChhbnN3ZXIgPT0gdHJ1ZSkge1xuXHRcdFx0c2l0ZUljb24udmFsKCcwJyk7XG5cdFx0XHRhdHRhY2htZW50TWVkaWFWaWV3LmFkZENsYXNzKCduby1zaG93LXByZXZpZXcnKTtcblx0XHRcdHVwbG9hZEJ1dHRvbi50ZXh0KCdTZWxlY3QgSW1hZ2UnKTtcblx0XHR9XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9KTtcblxufSk7XG4iXX0=
